<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Knowledge Base Enrichment â€” Content Understanding Demo</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <header>
        <h1>ğŸ” Knowledge Base Enrichment</h1>
        <p class="subtitle">Compare baseline RAG vs. CU-enhanced RAG â€” side by side</p>
    </header>

    <main>
        <!-- Corpus & Pipeline Management -->
        <details class="corpus-panel" id="corpus-panel">
            <summary>ğŸ“ Corpus &amp; Pipeline Management</summary>
            <div class="corpus-content">
                <div class="corpus-row">
                    <div class="corpus-upload">
                        <label for="file-upload" class="upload-label">Upload PDFs</label>
                        <input type="file" id="file-upload" accept=".pdf" multiple>
                        <button onclick="uploadFiles()">Upload</button>
                    </div>
                    <div class="corpus-info">
                        <span id="corpus-count">0 documents</span>
                    </div>
                    <div class="pipeline-actions">
                        <button onclick="runPipeline('baseline')" id="btn-run-baseline">â–¶ Run Baseline</button>
                        <button onclick="runPipeline('enhanced')" id="btn-run-enhanced" class="btn-enhanced">â–¶ Run Enhanced</button>
                    </div>
                </div>
                <div id="pipeline-status" class="pipeline-status" style="display:none;"></div>
                <ul id="corpus-list" class="corpus-list"></ul>
            </div>
        </details>

        <div class="input-bar">
            <input type="text" id="query-input"
                   placeholder="Ask about GAO cybersecurity reportsâ€¦"
                   autocomplete="off">
            <button id="send-btn" onclick="sendQuery()">Compare</button>
        </div>

        <div id="sample-questions" class="sample-questions">
            <span class="label">Try:</span>
            <button class="sample" onclick="askSample(this)">What are the main cybersecurity challenges facing federal agencies?</button>
            <button class="sample" onclick="askSample(this)">Which agencies have the most recommendations?</button>
            <button class="sample" onclick="askSample(this)">What did GAO find about legacy IT systems?</button>
        </div>

        <div class="panels">
            <section class="panel baseline">
                <div class="panel-header">
                    <h2>ğŸ“„ Baseline RAG</h2>
                    <span class="tag">Plain text chunks only</span>
                </div>
                <div class="chat-area" id="baseline-chat">
                    <div class="placeholder">Responses will appear hereâ€¦</div>
                </div>
                <div class="metrics" id="baseline-metrics"></div>
            </section>

            <section class="panel enhanced">
                <div class="panel-header">
                    <h2>âœ¨ CU-Enhanced RAG</h2>
                    <span class="tag accent">+ Metadata &amp; structure</span>
                </div>
                <div class="chat-area" id="enhanced-chat">
                    <div class="placeholder">Responses will appear hereâ€¦</div>
                </div>
                <div class="metrics" id="enhanced-metrics"></div>
            </section>
        </div>

        <section class="stats-bar" id="stats-bar" style="display:none;">
            <div class="stat-group">
                <div class="stat-group-label">Baseline</div>
                <div class="stat"><span class="stat-label">Named reports</span><span class="stat-value" id="stat-baseline-reports">0</span></div>
                <div class="stat"><span class="stat-label">Agencies identified</span><span class="stat-value" id="stat-baseline-agencies">0</span></div>
                <div class="stat"><span class="stat-label">Has titles</span><span class="stat-value" id="stat-baseline-titles">âœ—</span></div>
                <div class="stat"><span class="stat-label">Response time</span><span class="stat-value" id="stat-baseline-time">â€”</span></div>
            </div>
            <div class="stat-divider"></div>
            <div class="stat-group enhanced-group">
                <div class="stat-group-label">Enhanced</div>
                <div class="stat"><span class="stat-label">Named reports</span><span class="stat-value" id="stat-enhanced-reports">0</span></div>
                <div class="stat"><span class="stat-label">Agencies identified</span><span class="stat-value" id="stat-enhanced-agencies">0</span></div>
                <div class="stat"><span class="stat-label">Has titles</span><span class="stat-value" id="stat-enhanced-titles">âœ—</span></div>
                <div class="stat"><span class="stat-label">Response time</span><span class="stat-value" id="stat-enhanced-time">â€”</span></div>
            </div>
        </section>
    </main>

    <footer>
        <p>Powered by <strong>Azure AI Content Understanding</strong> Â· Knowledge Base Overnight Enrichment Demo</p>
    </footer>

    <script src="/static/app.js"></script>
</body>
</html>
